<ng-container *ngIf="!(isFetching | async) && (submission | async) as submission; else loader">
  <h2 class="title">
    Посылка №{{submission.index}}
  </h2>

  <div class="status-box">
    <span>{{submission.id}}</span>

    <app-package-status class="status" [status]="submission.status"></app-package-status>
  </div>

  <b class="name">{{submission.userName}}</b>

  <span class="date">{{getDate(submission.date, true)}}</span>

  <p class="description">Данная задача содержит пять подзадач. Для оценки каждой подзадачи используется своя группа тестов. Баллы за подзадачу
  начисляются только в том случае, если все тесты из этой группы пройдены.</p>

  <app-tabs class="tabs" [tabs]="tabs" (tabClick)="activeTab = $event">
    <button class="app-link download">
      <app-icon class="download-icon" icon="archive"></app-icon>
      Скачать посылку
    </button>
  </app-tabs>

  <app-no-encapsulation *ngIf="activeTab === 'submission_code' && submission.source">
    <ngx-codemirror
      class="codemirror"
      [ngModel]="submission.source.code"
      [disabled]="true"
      [options]="{
        lineNumbers: true,
        mode: submission.lang.mode
      }"
    ></ngx-codemirror>
  </app-no-encapsulation>

  <ng-container *ngIf="activeTab === 'protocol' && submission.protocol">
    <ng-container *ngIf="!submission.protocol.compilerOutput; else noTests">
      <h3 class="title-small">Статистика</h3>
      <app-statistics
        class="statistics"
        [tests]="submission.protocol.tests"
        [timeLimit]="(problem | async).timeLimit"
        [memoryLimit]="(problem | async).memoryLimit"
      ></app-statistics>

      <h3 class="title-small">Результаты тестирования</h3>
      <app-tests [tests]="submission.protocol.tests"></app-tests>
    </ng-container>

    <ng-template #noTests>
      <div class="error-no-tests">
        <app-icon class="error-icon" icon="error"></app-icon>
        0 пройденных тестов
      </div>

      <span class="compiler-title">Сообщение компилятора</span>

      <div class="compiler-message">
        {{submission.protocol.compilerOutput}}
      </div>
    </ng-template>
  </ng-container>

    
</ng-container>

<ng-template #loader>
  <app-loader class="loader"></app-loader>
</ng-template>
